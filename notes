conrol node,managed nodes
configuration management(core funtion)>system admins
datadog agent installtion on ec2
yaml>easy 
redhat ansible
Important>ansible is idempotent in nature>if it's already avialble(installed)-ansible will
NOT execute(install) again(no recreatation-no alreay exists error)


ansible>>agentless,one control node(python prequisite),many manage nodes(any distribtions-prequite-python)
ansible>provisioning resources in cloud,CICD deployment,network automation(CISCO-network appliances)

ansible vs shell scripting vs python
inventory file>>manage nodes list 

ssh protocoal,winrm protocol 

Ansible Core is Written in Python: Ansible itself is developed using Python. The control node (where Ansible is installed and run) requires Python to interpret and execute the Ansible code and modules.

pip install ansible

YAML
===========
YAML can be easily serialized and deserialized in many popular programming languages (Python, Ruby, JavaScript, etc.), making it a great option for data exchange and configuration in different ecosystems.
For example, in Python, you can convert Python objects into YAML (serialization) and load YAML into Python objects (deserialization) easily using libraries like PyYAML.
Hierarchical structure: YAML’s indentation-based format naturally represents nested and hierarchical structures, which are common in Kubernetes (e.g., pods containing containers, containers exposing ports).
Multiple resources: YAML allows multiple Kubernetes objects to be defined in the same file, separated by ---. This makes it easy to manage and deploy multiple resources at once.

passwordless authentication
====================
ssh-copy-id -f "-o IdentityFile <PATH TO PEM FILE>" ubuntu@<INSTANCE-PUBLIC-IP>
first time provide password,ssh key for the first time.
1)password
2)SSH (using keys(pem files))
ad hoc command(imperative-CLI commands)

ansible inventory file
===================
inventory.ini>>can be in any location
/etc/ansible/hosts>>default file location
list of hostnames(manage nodes)
user@ip address


ansible ad-hoc commands
====================
ansible -i inventory.ini -m ping all
ansible -i inventory.ini -m shell -a "apt install openjdk" all
ansible -i inventory.ini -m ping user1@publicip1
ansible -i inventory.ini -m ping db
ansible -i inventory.ini -m shell -a "sudo ls /etc" all



playbook
=====
playbook list of plays,playbook is collection of plays
playbook consitis of tasks
playbook>>hosts,remoteuser,task(t uses modules-to perform execution)

anisble-playbook -i inventory.ini my-first-playbook.yaml 


ansible roles(modularization-similar to helm charts or terraform modules)
==========
ansible role is modularized playbook
role>>different sectional folders(tasks,vars,handlers,metadata etc )  of the ansibleplaybook 

anisble-galaxy role init role-name
roles >for complicated(many steps) playbooks 
roles can be  uploaded to anisble glaxy or also roles can be donwloaed.
 we can convert playbook to roles(modularization of playbook)

run playbook with role referencing>>using ansible-playbook command only(only playbook yaml file has role's referencing)
 handlers are particular taks>to be executed upon particular action and someone requests(notify) it.





ansible galaxy>>market place for ansible roles
=================
ansbile-galaxy install role role-name(from galaxy)
location>~/.ansible/roles
we can execute roles by referencing them in our playbooks>>running as playbook
import ansible files from github to galaxy
ansible-galaxy import github-username role-name --token value(from galaxy)
rolenamspace will be there for roles/users




ansible collection
==================== 
first install aws amazon colletions
boto3 to be installed on control node
commands are executed on the control node itself>talking to aws apis..so inventory file
hosts: localhost and connection: local tell Ansible to run the playbook on your local machine (control node), but the API requests (like launching EC2 instances) are sent to AWS services from the local machine.
Your local machine, where Ansible is running, sends API requests to AWS to launch or manage resources.In essence, Ansible uses the local machine (control node) to send instructions to AWS, but the resources themselves are deployed in AWS.
The playbook connects to AWS using the AWS credentials (configured locally) and makes API calls to AWS.
When managing cloud resources like EC2, S3, RDS, etc., you don’t need to SSH into any remote machine because AWS provides an API that you can interact with directly from the control node. That’s why Ansible executes tasks locally on localhost.
localhost tells Ansible that you’re running the playbook on the control node itself (not on a remote host).
connection: local instructs Ansible not to use SSH or any other protocol to connect to a remote host. Instead, it runs the tasks locally.
In a typical Ansible playbook, hosts would refer to target nodes (e.g., remote servers) where tasks need to be executed.
But when you're dealing with AWS resources, there are no actual target nodes at the time of running the playbook (because you're creating them). You need to run the playbook from your control node (which is often your local machine or another EC2 instance).
The control node will use the AWS credentials (from environment variables or a credentials file) to authenticate with AWS and make API calls to launch the necessary resources.
Important>>you can launch resource using the roles(modularization)
vault integration(builtin) to store access and secret keys>>ansible vault
create password for vault and add keys to valut
ansible-playbook inventory.ini(not requried) ec2_create.yaml --vault-password-file vault.pass
appox 22 ways vars can be declared in ansible!!
vars folder(main.yaml) has more precedence to defaultt(main.yaml)
-e >>extra vars hightest precedence


